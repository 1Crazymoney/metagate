<link rel="stylesheet" type="text/css" href="example3.css" media="screen" />

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>

<script>
    
    function registerAddress() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.registerAddress(true, document.createWalletForm.from1.value, "1") ;
        });
    }
    
    function unlock() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.unlockWallet(document.createWalletForm.from1.value, "123", "123", 1000000) ;
        });
    }
    
    function sendMsg() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.sendMessage(document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.text1.value, "1234567",  "1") ;
        });
    }
    
    function savePubkeyTo() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.savePublicKeyCollocutor(true, document.createWalletForm.from1.value, document.createWalletForm.to1.value) ;
        });
    }
        
    function createWalletMHCResultJs(reqid, pubkey, address, ex, sig, err, errNo, tmp) {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.mainWindow;
        mainWindow.createRsaKey("1", address, "123") ;
        document.createWalletForm.tmp.value = address;
        });
    }
        
    function genKey() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.mainWindow;
        mainWindow.createWalletMHC("1", "123") ;
        });
    }
      
    function getMessages1() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddress(document.createWalletForm.from1.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }

    function getMessages2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddressAddress( document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }
      
    function getMessages3() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddressAddressCount( document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }
      
    function getLastMessage() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getLastMessageNumber(document.createWalletForm.from1.value) ;
        });
    }
      
    function getCountMessages2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getCountMessages(document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value) ;
        });
    }
      
    function savePos() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.savePos(document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value) ;
        });
    }
    
    function savePosChannel() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.savePosToChannel(document.createWalletForm.from1.value, document.createWalletForm.channelSha.value, document.createWalletForm.count.value) ;
        });
    }
    
    function getSavePos() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getSavedPos(document.createWalletForm.from1.value, document.createWalletForm.to1.value) ;
        });
    }
    
    function getSavePos2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getSavedsPos(document.createWalletForm.from1.value) ;
        });
    }
    
    
    function msgChannelCreateJs(addr, channel, channelSha) {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        document.createWalletForm.channelSha.value = channelSha;
        });
    }
    
    function createChannel() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.createChannel(document.createWalletForm.from1.value, document.createWalletForm.channel.value, "1") ;
        });
    }
    
//////////////////////////////proxy
    
    function startProxy() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.proxyStart() ;
        });
    }
    
    function stopProxy() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.proxyStop() ;
        });
    }
    
    function proxyStartResultJs(res) {
       
        document.createWalletForm.proxyport.value = res;
    }
    
    function proxyStopResultJs(res) {
       
        document.createWalletForm.proxyport.value = res;
    }
    
       
    function getPort() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.getPort() ;
        });
    }

    function setPort() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.setPort(8888) ;
        });
    }
    
    function proxyServerPortInfoJs(port) {
        document.createWalletForm.proxyport.value = port;
    }

    
    function getRouters() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.getRoutersList() ;
        });
    }
    
    function discoverRouters() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.discoverRouters() ;
        });
    }
    
    function proxyGetRoutersJs(routers) {
        document.createWalletForm.proxyport.value = routers;
    }
    
    function proxyDiscoverRoutersResultJs(routers) {
        document.createWalletForm.proxyport.value = routers;
    }
    
    function addPortMapping() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.addPortMapping('uuid:00e0fc37-2525-2828-2500-001020304050');
        });
    }
    
    function deletePortMapping() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.deletePortMapping();
        });
    }
    
    function proxyAddPortMappingResultJs(res) {
        document.createWalletForm.proxyport.value = res;
    }
        
    function proxyDeletePortMappingResultJs(res) {
        document.createWalletForm.proxyport.value = res;
    }
    
//////////////////////////////////////
// AUTO
    
    function startAutoProxy() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.proxyAutoStart() ;
        });
    }
    
    function stopAutoProxy() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.proxyAutoStop() ;
        });
    }
    
    function proxyAutoStartResultJs(res) {
       
        document.createWalletForm.proxyport.value = res;
    }
    
    function proxyAutoStopResultJs(res) {
       
        document.createWalletForm.proxyport.value = res;
    }
    
    function getProxyStatus() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.getProxyStatus();
        });
    }
    
    function proxyServerStatusInfoJs(res) {
        document.createWalletForm.proxyport.value = res;
    }
    
    function proxyAutoStartResend() {
        document.createWalletForm.proxyport.value = "";
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.proxy;
        mainWindow.proxyAutoStartResend() ;
        });
    }

    function proxyAutoStartProxyResJs(res) {
        document.createWalletForm.proxyport.value += '->PROXY' + res;
    }
    
    function proxyAutoStartRouterResJs(res) {
        document.createWalletForm.proxyport.value += '->ROUTER' + res;
    }
    
    function proxyAutoStartTestResJs(res) {
        document.createWalletForm.proxyport.value += '->TEST' + res;
    }
    
    function proxyAutoStartExecutedResJs() {
        document.createWalletForm.proxyport.value += '->EXEC';
    }
    
    function proxyAutoStartCompleteResJs(res) {
        document.createWalletForm.proxyport.value += '->COMPLT';
    }

    function proxyConnectedPeersResJs(res) {
        document.createWalletForm.resres.value = res;
    }
    
    function proxyAutoStartIsActiveResJs(res) {
        document.createWalletForm.resres1.value = res;
    }
    
        
    
//////////////////////////////////////
    
    function sendMsgChannel() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.sendMessageToChannel(document.createWalletForm.from1.value, document.createWalletForm.channelSha.value, document.createWalletForm.text1.value, "1234567",  "1") ;
        });
    }
    
    function getChannelsList() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getChannelsList(document.createWalletForm.from1.value) ;
        });
    }
    
    
    function getLastMessageChannel() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getLastMessageChannelNumber(document.createWalletForm.from1.value, document.createWalletForm.channelSha.value) ;
        });
    }

    function getMessagesChannel2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddressChannel( document.createWalletForm.from1.value, document.createWalletForm.channelSha.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }
      
    function getMessagesChannel3() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddressChannelCount( document.createWalletForm.from1.value, document.createWalletForm.channelSha.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }
    
    
</script>

<body onload="generateAllWalletsJs();"></body>

<div class="back">

  <div id="two" class="abs block">
    <a href="#one">создание счета</a>
    <b><a href="#two">подпись данных</a></b>
    <p class="abs">
        <left>
            <FORM name="sign">
            </FORM>
        </left>
    </p>
  </div>

  <div id="one" class="abs block">
    <b><a href="#one">создание счета</a></b>
    <a href="#two">подпись данных</a>
    <p class="abs">
        <left>
            <FORM name="createWalletForm">
            <input name="from1" type="text" value="0x00a76553d2a3e8d4b2d8b8fe65aebab77deaba86cf96e326ed" size="60"><label for="from1">from1</label><br>
            <input name="to1" type="text" value="0x0039fec32dcde172da7d676e4a6bc4a9d23ad052cc43640ca3" size="60"><label for="to1">to</label><br>
            <input name="text1" type="text" value="00a765" size="60"><label for="text1">textHex</label><br>
            <input name="tmp" type="text" value="" size="60"><label for="tmp">tmp</label><br>
            <input name="channel" type="text" value="channel2" size="60"><label for="channel">channel</label><br>
            <input name="channelSha" type="text" value="8f06fb09c4a8f44b419e19b5422fba3980af99a1e1dbae94629896458b3a1240" size="60"><label for="channelSha">channelSha</label><br>
            <input name="count" type="text" value="10" size="60"><label for="count">count/savePos/from</label><br>
            <input name="toCnt" type="text" value="1000" size="60"><label for="toCnt">toCnt</label><br>
            
            <input type="button" value="genKey" onclick="genKey()">
            <input type="button" value="unlock" onclick="unlock()">
            <input type="button" value="register" onclick="registerAddress()">
            <input type="button" value="getAndSavePubkeyTo" onclick="savePubkeyTo()"><br>
            <input type="button" value="sendMsg" onclick="sendMsg()"><br>
            <input type="button" value="getMessagesFromTo" onclick="getMessages1()"><br>
            <input type="button" value="getMessagesCollFromTo" onclick="getMessages2()"><br>
            <input type="button" value="getMessagesCollCountTo" onclick="getMessages3()"><br>
            <input type="button" value="getLastMessageNumber" onclick="getLastMessage()"><br>
            <input type="button" value="getCountMessages" onclick="getCountMessages2()"><br>
            <input type="button" value="savePos" onclick="savePos()"><br>
            <input type="button" value="getSavePos" onclick="getSavePos()"><br>
            <input type="button" value="getSavePosAll" onclick="getSavePos2()"><br>
            <br>
            <input type="button" value="createChannel" onclick="createChannel()"><br>
            <input type="button" value="start proxy" onclick="startProxy()"><br>
            <input type="button" value="stop proxy" onclick="stopProxy()"><br>
            <input type="button" value="get proxy status" onclick="getProxyStatus()"><br>
            <input type="button" value="get port" onclick="getPort()"><br>
            <input type="button" value="set port" onclick="setPort()"><br>
            <input name="proxyport" type="text" value="-1" size="600"><br>
            <input name="resres" type="text" value="" size="100"><br>
            <input name="resres1" type="text" value="" size="100"><br>
            <input type="button" value="start auto proxy" onclick="startAutoProxy()"><br>
            <input type="button" value="stop auto proxy" onclick="stopAutoProxy()"><br>
            <input type="button" value="AUTO resend" onclick="proxyAutoStartResend()"><br>
            <input type="button" value="Discover Routers" onclick="discoverRouters()"><br>
            <input type="button" value="Get Routers" onclick="getRouters()"><br>
            <input type="button" value="Add Port Mapping" onclick="addPortMapping()"><br>
            <input type="button" value="Delete Port Mapping" onclick="deletePortMapping()"><br>
            <input type="button" value="sendMsgChannel" onclick="sendMsgChannel()"><br>
            <input type="button" value="savePosChannel" onclick="savePosChannel()"><br>
            <input type="button" value="getChannelsList" onclick="getChannelsList()"><br>
            <input type="button" value="getLastMessageChannel" onclick="getLastMessageChannel()"><br>
            <input type="button" value="getMessagesChannelCollFromTo" onclick="getMessagesChannel2()"><br>
            <input type="button" value="getMessagesChannelCollCountTo" onclick="getMessagesChannel3()"><br>
            </FORM>
        </left>
    </p>
  </div>

</div>
