<link rel="stylesheet" type="text/css" href="example3.css" media="screen" />

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>

<script>
    
    function registerAddress() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.registerAddress(true, document.createWalletForm.from1.value, "1") ;
        });
    }
    
    function unlock() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.unlockWallet(document.createWalletForm.from1.value, "123", "123", 1000000) ;
        });
    }
    
    function sendMsg() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.sendMessage(document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.text1.value, "1234567",  "1") ;
        });
    }
    
    function savePubkeyTo() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.savePublicKeyCollocutor(true, document.createWalletForm.from1.value, document.createWalletForm.to1.value) ;
        });
    }
        
    function createWalletMHCResultJs(reqid, pubkey, address, ex, sig, err, errNo, tmp) {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.mainWindow;
        mainWindow.createRsaKey("1", address, "123") ;
        document.createWalletForm.tmp.value = address;
        });
    }
        
    function genKey() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.mainWindow;
        mainWindow.createWalletMHC("1", "123") ;
        });
    }
      
    function getMessages1() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddress(document.createWalletForm.from1.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }

    function getMessages2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddressAddress( document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }
      
    function getMessages3() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getHistoryAddressAddressCount( document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value, document.createWalletForm.toCnt.value) ;
        });
    }
      
    function getLastMessage() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getLastMessageNumber(document.createWalletForm.from1.value) ;
        });
    }
      
    function getCountMessages2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getCountMessages(document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value) ;
        });
    }
      
    function savePos() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.savePos(document.createWalletForm.from1.value, document.createWalletForm.to1.value, document.createWalletForm.count.value) ;
        });
    }
    
    function getSavePos() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getSavedPos(document.createWalletForm.from1.value, document.createWalletForm.to1.value) ;
        });
    }
    
    function getSavePos2() {
        new QWebChannel(qt.webChannelTransport, function (channel) {
        var mainWindow = channel.objects.messenger;
        mainWindow.getSavedsPos(document.createWalletForm.from1.value) ;
        });
    }
    
</script>

<body onload="generateAllWalletsJs();"></body>

<div class="back">

  <div id="two" class="abs block">
    <a href="#one">создание счета</a>
    <b><a href="#two">подпись данных</a></b>
    <p class="abs">
        <left>
            <FORM name="sign">
            </FORM>
        </left>
    </p>
  </div>

  <div id="one" class="abs block">
    <b><a href="#one">создание счета</a></b>
    <a href="#two">подпись данных</a>
    <p class="abs">
        <left>
            <FORM name="createWalletForm">
            <input name="from1" type="text" value="0x00a76553d2a3e8d4b2d8b8fe65aebab77deaba86cf96e326ed" size="60"><label for="from1">from1</label><br>
            <input name="to1" type="text" value="0x0039fec32dcde172da7d676e4a6bc4a9d23ad052cc43640ca3" size="60"><label for="to1">to</label><br>
            <input name="text1" type="text" value="00a765" size="60"><label for="text1">textHex</label><br>
            <input name="tmp" type="text" value="" size="60"><label for="tmp">tmp</label><br>
            <input name="count" type="text" value="10" size="60"><label for="count">count/savePos/from</label><br>
            <input name="toCnt" type="text" value="1000" size="60"><label for="toCnt">toCnt</label><br>
            <input type="button" value="genKey" onclick="genKey()">
            <input type="button" value="unlock" onclick="unlock()">
            <input type="button" value="register" onclick="registerAddress()">
            <input type="button" value="getAndSavePubkeyTo" onclick="savePubkeyTo()"><br>
            <input type="button" value="sendMsg" onclick="sendMsg()"><br>
            <input type="button" value="getMessagesFromTo" onclick="getMessages1()"><br>
            <input type="button" value="getMessagesCollFromTo" onclick="getMessages2()"><br>
            <input type="button" value="getMessagesCollCountTo" onclick="getMessages3()"><br>
            <input type="button" value="getLastMessageNumber" onclick="getLastMessage()"><br>
            <input type="button" value="getCountMessages" onclick="getCountMessages2()"><br>
            <input type="button" value="savePos" onclick="savePos()"><br>
            <input type="button" value="getSavePos" onclick="getSavePos()"><br>
            <input type="button" value="getSavePosAll" onclick="getSavePos2()"><br>
            </FORM>
        </left>
    </p>
  </div>

</div>